<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    /*
    邓哥心中有二十个女神，他决定用更加高效的办法
    他同时给二十个女神表白，如果有女神同意，就拒绝其他的女神
    并且，当所有的女神回复完成后，他要把所有的回复都记录到日志进行分析
    用代码模拟上面的场景
    */
    <script>
        function biaobai(god, callback) {
            console.log(`表白${god}`);
            setTimeout(() => {
                if (Math.random() < 0.1) {
                    callback(true)
                } else {
                    callback(false)
                }
            }, Math.floor(Math.random() * (3000 - 1000) + 1000));
        }
        let tongyi = null;
        let arr = [];
        for (let i = 1; i <= 20; i++) {
            biaobai(`女神${i}`, (result) => {
                arr.push(result)
                if (tongyi) {
                    if (result) {
                        console.log(`女神${i}同意了`);
                        console.log('开玩笑的');
                    } else {
                        console.log(`女神${i}拒绝了`);
                    }
                } else {
                    console.log(`女神${i}同意了`);
                    tongyi = `女神${i}`
                }
                if (arr.length === 20) {
                    console.log(arr);
                }
            })

        }
    </script>
</body>

</html>